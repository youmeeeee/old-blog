<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>(부스트코스) Part2 JSP&Servlet | Youmekko</title><meta name="description" content="(부스트코스) Part2 JSP&amp;Servlet - Youme Choi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="Youmekko"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Youmekko" type="application/atom+xml">
</head><body><div class="wrap"><header><h1 class="branding"><a href="/" title="Youmekko">Youmekko</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives" target="_self">ARCHIVES</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://github.com/youmekko" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="/atom.xml" target="_self">RSS</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about" target="_self">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">(부스트코스) Part2 JSP&Servlet</h1><div class="post-info"><a></a>2018-05-02</div><div class="post-content"><h3 id="JSP의-등장배경"><a href="#JSP의-등장배경" class="headerlink" title="JSP의 등장배경"></a>JSP의 등장배경</h3><ul>
<li>마소에서 ASP(Active Server Page)라는 쉽게 웹을 개발할 수 있는 스크립트 엔진을 발표 (1998)</li>
<li>1997년에 발표된 서블릿은 ASP에 비해 상대적으로 개발 방식이 불편했기 때문에 ASP에 대항하기 위헤 1999년 썬마이크로시스템즈에서 JSP를 발표</li>
<li>JSP는 실제로 서블릿 기술을 사용</li>
</ul>
<h3 id="JSP-라이프-사이클"><a href="#JSP-라이프-사이클" class="headerlink" title="JSP 라이프 사이클"></a>JSP 라이프 사이클</h3><p>WAS는 웹 즈라우저로부터 JSP에 대한 요청을 받게 되면, JSP코드를 서블릿 소스코드로 변환한 후 컴파일 하여 실행한다. 서블릿으로 컴파일 되어 실행 될 떄 상황에 따라서 어떤 메소드들이 실행되는지잘 알아야 JSP를 알맞게 작성할 수 있다.</p>
<h5 id="jsp-파일이-실행-될-때"><a href="#jsp-파일이-실행-될-때" class="headerlink" title=".jsp 파일이 실행 될 때"></a>.jsp 파일이 실행 될 때</h5><ul>
<li>workspace 아래의 .metadata 폴더에 .java파일이 생성된다.</li>
<li>해당 파일의 service() 메소드 안을 보면 jsp파일이 변환 되어서 들어가있는 것을 확인 할 수 있다. (JSP의 선언식 <code>&lt;%! %&gt;</code> 안에 작성하면 서비스 메소드 바깥쪽에도 들어간다.)</li>
<li>해당 파일은 서블릿 소스로 자동 컴파일 되면서 실행되서 그 결과가 브라우저에 보여진다.</li>
</ul>
<h5 id="JSP의-실행-순서"><a href="#JSP의-실행-순서" class="headerlink" title="JSP의 실행 순서"></a>JSP의 실행 순서</h5><ol>
<li>브라우저가 웹서버에 JSP에 대한 요청 정보를 전달한다.</li>
<li>브라우저가 요청한 JSP가 최초로 요청했을 경우만<br>(1)  JSP로 작성된 코드가 서블릿 코드로 변환된다. (java파일 생성)<br>(2) 서블릿 코드를 컴파일 해서 실행가능한 byedcoe로 변환한다. (class파일 생성)<br>(3) 서블릿 클래스를 로딩하고 인스턴스를 생성한다.</li>
<li>서블릿이 실행되어 요청을 처리하고 응답 정보를 생성한다.</li>
</ol>
<h3 id="JSP-문법"><a href="#JSP-문법" class="headerlink" title="JSP 문법"></a>JSP 문법</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!    %&gt; 선언문 (Declation)</span><br><span class="line">&lt;%     %&gt; 스크립트릿 (Scriptlet)</span><br><span class="line">&lt;%=    %&gt; 표현식 (Expression)</span><br><span class="line">&lt;%-- --%&gt; 주석 (Comment)</span><br></pre></td></tr></table></figure>



<h3 id="JSP-내장-객체-Implicit-Objects"><a href="#JSP-내장-객체-Implicit-Objects" class="headerlink" title="JSP 내장 객체 (Implicit Objects)"></a>JSP 내장 객체 (Implicit Objects)</h3><p>JSP에 입력한 대부분의 코드는 생성되는 소스의 service 메소드 안에 삽입되어 있는 코드로 생성된다. *<em>service 메소드에 삽입된 코드의 윗 부분에 미리 선언된 객체들이 있는데, 해당 객체들은 JSP에서도 사용 가능하다. *</em></p>
<p>response, request, application, session, out과 같은 변수를 내장 객체라고 한다.</p>
<p><img src="/img/2018-05-02-jsp-01.png" alt=""></p>
<h3 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a>redirect</h3><ul>
<li><p>리다이렉트는 http 프로토콜로 정해진 규칙이다.</p>
</li>
<li><p>서버는 클라이언트로 요청을 받은 후, 클라이언트에게 특정 URL로 이동하라고 요청할 수 있다. 이것을 리다이렉트라고 한다.</p>
</li>
<li><p>서버에서는 클라이언트에게 응답으로 <u>상태 코드를 302와 함께</u> 이동할 URL 정보를 Location 헤더(Header)에 담아 전송한다. 클라이언트는 서버로부터 받은 상태값이 302이면 Location 헤더 값으로 재요청을 보내게 된다. <em>이때 브라우저의 주소창은 전송받은 URL로 바뀌게 된다.</em></p>
</li>
<li><p><strong>서블릿이나 jsp는 redirect하기 위해 HttpServletResponse클래스가 가지고 있는 sendRedirect() 메소드를 사용한다.</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">"newUrl.jsp"</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>리다이렉트의 단점은 서버에 두번 요청을 보내야 한다는 것…</p>
</blockquote>
<h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><p><img src="/img/2018-05-02-jsp-02.png" alt=""></p>
<ol>
<li>웹 브라우저에서 Servlet1에 요청을 보낸다.</li>
<li>Servlet1은 요청을 처리한후 그 결과를 HttpServletRequest 객체에에 저장한다.</li>
<li>Serlvet1은 결과가 저장된 HttpServletRequest 응답을 위한 HttpServletResponse를 같은 웹 어플리케이션 안에 있는 Servlet2에 전송한다. (forward)</li>
<li>Servlet2는 Servlet1으로 부터 받은 HttpServletRequest와 HttpServeltResponse를 이용하여 요청을 처리한 후 웹 브라우저에게 결과를 전송한다.</li>
</ol>
<p><strong>redirect와 forward의 가장 큰 차이는 리다이렉트는 요청/응답객체가 두번 만들어진다. 하지만 포워드는 위 그림처럼 요청/응답 객체가 한번씩만 만들어진다.</strong> <em>포워드는 URL도 변경되지 않는다.</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">           </span><br><span class="line">       <span class="keyword">int</span> diceValue = (<span class="keyword">int</span>)(Math.random() * <span class="number">6</span>) + <span class="number">1</span>; </span><br><span class="line">       request.setAttribute(<span class="string">"dice"</span>, diceValue);</span><br><span class="line">           </span><br><span class="line">       RequestDispatcher requestDispatehcer = request.getRequestDispatcher(<span class="string">"/next"</span>);</span><br><span class="line">       requestDispatehcer.forward(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    </span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        out.println(<span class="string">"&lt;html&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;head&gt;&lt;title&gt;form&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;body&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> dice = (Integer)request.getAttribute(<span class="string">"dice"</span>);</span><br><span class="line">        out.println(<span class="string">"dice : "</span> + dice);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dice; i++) &#123;</span><br><span class="line">            out.print(<span class="string">"&lt;br&gt;hello"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        out.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Servlet과-JSP-연동"><a href="#Servlet과-JSP-연동" class="headerlink" title="Servlet과 JSP 연동"></a>Servlet과 JSP 연동</h3><ul>
<li><p>Servlet은 프로그램 로직이 수행되기에 유리하다. IDE 등에서 지원을 좀 더 잘해준다.</p>
</li>
<li><p>JSP는 결과를 출력하기에 Servlet보다 유리하다. 필요한 html문을 그냥 입력하면 된다.</p>
</li>
<li><p>프로그램 로직 수행은 Servlet에서, 결과 출력은 JSP에서 하는 것이 유리하다.</p>
</li>
</ul>
<h5 id="Servlet과-JSP의-장단점을-해결하기-위해서-Servlet에서-프로그램-로직이-수행되고-그-결과를-JSP에-포워딩-하는-방법이-사용되게-되었다"><a href="#Servlet과-JSP의-장단점을-해결하기-위해서-Servlet에서-프로그램-로직이-수행되고-그-결과를-JSP에-포워딩-하는-방법이-사용되게-되었다" class="headerlink" title="Servlet과 JSP의 장단점을 해결하기 위해서 Servlet에서 프로그램 로직이 수행되고 그 결과를 JSP에 포워딩 하는 방법이 사용되게 되었다."></a>Servlet과 JSP의 장단점을 해결하기 위해서 Servlet에서 프로그램 로직이 수행되고 그 결과를 JSP에 포워딩 하는 방법이 사용되게 되었다.</h5><h3 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h3><p>작은 순으로</p>
<ol>
<li>Page :  페이지 내에서 지역 변수처럼 사용</li>
<li>Request : http 요청을 WAS가 받아서 웹 브라우저에 응답할 때 까지 변수가 유지되는 경우 사용</li>
<li>Session : 웹 브라우저 별로 변수가 관리되는 경우 사용</li>
<li>Application : 웹 어플리케이션이 시작되고 종료될 때까지 변수가 유지되는 경우 사용</li>
</ol>
<h5 id="1-Page-scope"><a href="#1-Page-scope" class="headerlink" title="(1) Page scope"></a>(1) Page scope</h5><ul>
<li>pageContext 추상 클래스를 사용한다.</li>
<li>JSP 페이지에서는 pageContext라는 내장 객체로 사용 가능하다.</li>
<li>forward가 될 경우 해당 Page scope에 지정된 변수는 사용할 수 없다.</li>
<li>사용 방법은 Application scope나 Session scope, request scope와 같다.</li>
<li>마치 지역 변수처럼 사용된다는 것이 다른 Scope들과 다르다.</li>
<li>jsp에서 pageScope에 값을 저장한 후 해당 값을 EL 표기법등에서 사용할 떄 사용된다. 지역 변수처럼 해당 jsp나 서블릿이 실행되는 도앙ㄴ에만 정보를 유지하고자 할 때 사용한다.</li>
</ul>
<h5 id="2-Request-scope"><a href="#2-Request-scope" class="headerlink" title="(2) Request scope"></a>(2) Request scope</h5><ul>
<li>http 요청을 WAS가 받아서 웹 브라우저에게 응답할 때까지 변수값을 유지하고자 할 경우 사용한다. </li>
<li>HttpServletRequest 객체를 사용한다.</li>
<li>JSP 에서는 request 내장 변수를 사용한다.</li>
<li>서블릿에서는 HttpServletRequest 객체를 사용한다.</li>
<li>값을 지정할 때는 request 객체의 setAttribute() 메소드를 사용한다.</li>
<li>값을 읽어들일 때는 request 객체의 getAttribute() 메소드를 사용한다.</li>
<li>forward시 값을 유지하고자 사용한다.</li>
</ul>
<h5 id="3-Session-scope"><a href="#3-Session-scope" class="headerlink" title="(3) Session scope"></a>(3) Session scope</h5><ul>
<li>웹 브라우저 별로 변수를 관리하고자 할 경우 사용한다.</li>
<li>웹 브라우저 간의 탭간에는 세션 정보가 공유되기 때문에 각각의 탭에서는 같은 세션 정보를 사용할 수 있따.</li>
<li>HttpSession 인터페이스를 구현한 객체를 사용한다.</li>
<li>JSP에서는 session 내장 변수를 사용한다.</li>
<li>서블릿에서는 HttpServletRequest의 getSession() 메소드를 이용하며 session 객체를 얻는다.</li>
<li>값을 저장할 때에는 session 객체의 setAttribute() 메소드를 사용한다.</li>
<li>값을 읽어들일 때는 session 객체의 getAttribute() 메소드를 사용한다.</li>
<li>장바구니 처럼 사용자 별로 유지되어야 할 정보가 있을 때 사용한다.</li>
</ul>
<h5 id="4-Application-scope"><a href="#4-Application-scope" class="headerlink" title="(4) Application scope"></a>(4) Application scope</h5><ul>
<li>웹 어플리케이션이 시작되고 종료될 때까지 변수를 사용할 수 있다.</li>
<li>ServletContext 인터페이스를 구현한 객체를 사용한다.</li>
<li>jsp 에서는 application 내장 객체를 이용한다.</li>
<li>서블릿의 경우에는 getServletContext() 메소드를 이용하여 application 객체를 이용한다.</li>
<li>웹 어플리케이션 하나당 하나의 application 객체가 사용된다.</li>
<li>값을 저장할 때는 application 객체의 setAttribute() 메소드를 사용한다.</li>
<li>값을 읽어들일 때는 application 객체의 getAttribute() 메소드를 사용한다.</li>
<li>모든 클라이언트가 공통으로 사용해야 할 값들이 있을 때 사용한다.</li>
</ul>
<p>[강의(내용/이미지) 출처] <a href="http://www.edwith.org/boostcourse-web" target="_blank" rel="noopener">http://www.edwith.org/boostcourse-web</a></p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2018/05/02/2018-05-02-JSP-JSTL/">prev</a><a class="next" href="/2018/05/01/2018-05-01-W.I.L/">next</a></div><div class="copyright"><p>&copy; 2016 - 2020 <a href="https://www.example.org/john-doe" target="_blank" rel="noopener">John Doe</a>.<br>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/Dreyer/hexo-theme-artemis" target="_blank">Artemis</a>.</p></div></footer></div></body></html>