<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>OracleSQL(3) 단일행 함수 | Youmekko</title><meta name="description" content="OracleSQL(3) 단일행 함수 - Youme Choi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="Youmekko"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Youmekko" type="application/atom+xml">
</head><body><div class="wrap"><header><h1 class="branding"><a href="/" title="Youmekko">Youmekko</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives" target="_self">ARCHIVES</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://github.com/youmekko" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="/atom.xml" target="_self">RSS</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about" target="_self">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">OracleSQL(3) 단일행 함수</h1><div class="post-info"><a></a>2018-01-10</div><div class="post-content"><h3 id="2장-단일행-함수"><a href="#2장-단일행-함수" class="headerlink" title="2장. 단일행 함수"></a>2장. 단일행 함수</h3><ul>
<li>SQL에서 사용되는 함수는 크게 단일행 함수와 복수행 함수로 구분할 수 있다.</li>
<li>단일행 함수는 한번에 하나씩 처리하는 함수이다.</li>
<li>복수행 함수는 여러건의 데이터를 동시에 입력을 받아서 결과값 1건을 만들어준느 함수이다. 복수행 함수는 그룹 함수라고도 한다.</li>
<li>단일행 함수는 입력되는 데이터의 종류에 따라 아래와 같이 구분할 수 있다.</li>
<li>문자 함수/ 숫자 함수 / 날짜 함수/ 변환 함수(묵시적 데이터 형변환, 명시적 데이터 형변환)/ 일반 함수</li>
<li>함수에 어떤 값이 입력되는가를 구분하는 것이 아주 중요하다.</li>
</ul>
<ol>
<li><p>문자 함수<br>1-1. INITCATP()함수</p>
<ul>
<li>영어의 첫글자만 대문자로 출력하고 나머지는 전부 소문자로  출력하는 함수이다.</li>
<li>중간에 공백이 있을 경우 공백 다음을 첫글자로 생각해서 대문자로 출력해준다.</li>
<li>한글보다는 영어에 유용하다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, INITCAP(first_name) <span class="string">"INITCAP"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-2. LOWER() 함수</p>
<ul>
<li>입력되는 값을 전부 소문자로 변경하여 출력한다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">LOWER</span>(first_name) <span class="string">"LOWER"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-3. UPPER() 함수</p>
<ul>
<li>입력 되는 값을 전부 대문자로 변경하여 출력한다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">UPPER</span>(first_name) <span class="string">"UPPER"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LOWER 함수와 UPPER 함수는 실무에서 자주 사용하는 함수이다.</span></span><br><span class="line"><span class="comment">-- 예를 들어, 회원 가입을 받을 때 ID를 소문자로 받고 싶은 경우 사용자가 어떤 문자를 입력해도 저장할때 LOWER함수를 이용하여 서문자로 바꾼후 저장하는 경우 등에 아주 유용하게 사용된다.</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-4. LENGTH()/LENGTHB() 함수</p>
<ul>
<li>입력된 문자열의 길이(바이트수)를 계산해주는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">LENGTH</span>(first_name) <span class="string">"First Name's Length"</span>, LENGTHB(first_name) <span class="string">"First Name's LENGTHB"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--영어일 경우는 LENGTH()와 LENGTHB()의 값이 동일하다. 하지만 한글일 경우는?</span></span><br><span class="line"><span class="comment">--컴퓨터에서 한글을 저장할 경우에는 일반적으로 1글자당 2바이트를 사용한다.(무조건은 아니고 설정에 따라 다를 수 있다.)</span></span><br><span class="line"><span class="comment">--이 함수는 예를 들어 회원 가입을 받을 때, 사용자가 입력한 글자 수를 확인할 때 요긴하게 사용된다.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">LENGTH</span>(first_name)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">LENGTH</span>(first_name) &gt; <span class="keyword">LENGTH</span>(<span class="string">'&amp;first_name'</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-5. CONCAT() 함수 (|| 연산자와 동일한 기능)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 이 함수보다는 || (연결 연산자)가 더 편한다.</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(first_name, last_name)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<p>1-6. <strong>SUBSTR() 함수!!! 아주 중요!!!</strong></p>
<ul>
<li>주어진 문자열에서 특정 길이의 문자만 골라낼 떄 사용하는 함수이다.</li>
<li>예를 들어 주민번호에서 생일만 찾아낼 때와 같은 경우에 아주 유용하게 사용하는 함수이다.</li>
<li>첫번째 숫자는 시작 위치의 숫자, 두번째 숫자는 글자수</li>
<li>시작 위치의 숫자에 마이너스를 안할 경우는 왼쪽→오른쪽 으로 글자를 골라내고 시작 위치의 숫자에 마이너스를 붙이면 오른쪽→왼쪽으로 검색을 한 후 왼쪽→오른쪽으로 글자 수를 세어 골라낸다는 점을 주의해야 한다.</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTR</span>(job_id, <span class="number">1</span>,<span class="number">2</span>) <span class="string">"1,2"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--이 함수를 활용하는 곳은 아주 많다. 예를 들어, 고객의 생일 하루전에 축하문자를 보낸다던지</span></span><br><span class="line"><span class="comment">--고객의 생일 3일전에 주변사람들에게 고객의 생일이 다가온다는 표시를 해줄때와 같이 다양하게 사용되는 함수이므로 꼭 기억해야한다.</span></span><br></pre></td></tr></table></figure>

<p>1-7. SUBSTRB() 함수</p>
<ul>
<li>SUBSTRB() 함수는 SUBSTR() 함수와 문법은 동일하지만 차이점을 추출할 자리수가 아니라 추출할 바이트 수를 지정하는 것이다.</li>
<li>영어일 경우는 결과가 동일하지만 영어를 제외한 다른 글자는 결과가 다를 수 있다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">'서진수'</span> <span class="string">"NAME"</span>, SUBSTRB(<span class="string">'서진수'</span>, <span class="number">1</span>,<span class="number">3</span>) <span class="string">"SUBSTRB"</span>, <span class="keyword">SUBSTR</span>(<span class="string">'서진수'</span>, <span class="number">1</span>,<span class="number">2</span>) <span class="keyword">substr</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-8. INSTR() 함수</p>
<ul>
<li>주어진 문자열이나 컬럼에서 특정 글자의 위치를 찾아주는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- INTSTR('문자열' 또는 컬럼, 찾는 글자, 시작위치, 몇번째인지(기본값은1))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'A-B-C-D'</span>, <span class="keyword">INSTR</span>(<span class="string">'A-B-C-D'</span>, <span class="string">'-'</span>, <span class="number">1</span>,<span class="number">3</span>) <span class="string">"INSTR"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'A-B-C-D'</span>, <span class="keyword">INSTR</span>(<span class="string">'A-B-C-D'</span>, <span class="string">'-'</span>, <span class="number">3</span>,<span class="number">1</span>) <span class="string">"INSTR"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'A-B-C-D'</span>, <span class="keyword">INSTR</span>(<span class="string">'A-B-C-D'</span>, <span class="string">'-'</span>, <span class="number">-1</span>,<span class="number">3</span>) <span class="string">"INSTR"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'A-B-C-D'</span>, <span class="keyword">INSTR</span>(<span class="string">'A-B-C-D'</span>, <span class="string">'-'</span>, <span class="number">-6</span>,<span class="number">1</span>) <span class="string">"INSTR"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="comment">--0 (없어서 0나오는 거임)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--아래의 예처럼 시작 위치와 찾으려는 위치 값는 생략 가능하며 이 값을 생략할 경우 자동으로 1로 설정 된다.</span></span><br><span class="line"><span class="keyword">SELECT</span> first_name, phone_number, <span class="keyword">INSTR</span>(phone_number, <span class="string">'.'</span>), department_id</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id &gt; <span class="number">50</span>;</span><br><span class="line"><span class="keyword">SELECT</span> first_name, phone_number, <span class="keyword">INSTR</span>(phone_number, <span class="string">'3'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--지역코드 없이 전화번호만 출력하기</span></span><br><span class="line"><span class="keyword">SELECT</span> first_name, phone_number, <span class="keyword">SUBSTR</span>(phone_number, <span class="keyword">INSTR</span>(phone_number, <span class="string">'.'</span>, <span class="number">1</span>, <span class="number">1</span>)+<span class="number">1</span>, <span class="number">9</span>) <span class="string">"WITHOUT AREA CODE"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-9. LPAD() 함수</p>
<ul>
<li>LAPD(‘문자열’ 또는 컬럼명, 자리수, ‘채울 문자’)</li>
<li>PAD라는 말은 채운다 라는 뜻이 있다.</li>
<li>LPAD는 직역하면 왼쪽에 채운다는 뜻이며 원래 데이터를 오른쪽에 두고 왼쪽에 빈자리가 있을 경우 왼쪽을 특정 기호나 문자로 채우라는 뜻이 있다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job_id, <span class="keyword">LPAD</span>(job_id, <span class="number">10</span>, <span class="string">'12345678910'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-10. RPAD() 함수</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job_id, RPAD(job_id, <span class="number">10</span>, <span class="string">'-'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"><span class="comment">-- jod_id의 길이를 구해서 다음 자리의 숫자를 잘라와서 채우면 된다</span></span><br><span class="line"><span class="comment">--9 - 6 = 3자리 7,8,9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> job_id, RPAD(job_id, <span class="number">9</span>, <span class="keyword">SUBSTR</span>(<span class="string">'12345678910'</span>, LENGTHB(job_id)+<span class="number">1</span>)) <span class="string">"JOBID"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

<p>1-11. LTRIM() 함수</p>
<ul>
<li>LPAD() RPAD() 함수가 채우는 함수였다면 LTRIM() RTRIM() 함수는 제거하는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">LTRIM</span>(first_name, <span class="string">'C'</span>) <span class="string">"LTRIM"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>1-12. RTRIM() 함수</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">RTRIM</span>(first_name, <span class="string">'l'</span>) <span class="string">"RTRIM"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<p>1-13. <strong>REPLACE() 함수! 아주 많이 쓰이니 정신 바짝 차리세용!</strong></p>
<ul>
<li>REPLACE(‘문자열’ 또는 컬럼명, ‘문자1’, ‘문자2’)</li>
<li>주어진 첫번째 문자열이나 컬럼에서 문자1을 문자 2로 바꾸어 출력하는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">REPLACE</span>(first_name, <span class="keyword">SUBSTR</span>(first_name, <span class="number">1</span>,<span class="number">2</span>), <span class="string">'**'</span>) <span class="string">"REPLACE"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--REPLACE() 퀴즈1</span></span><br><span class="line"><span class="comment">--firt_name을 이름의 3-4번째 글자만 --으로 변경해서 출력하기</span></span><br><span class="line"><span class="keyword">SELECT</span> first_name, <span class="keyword">REPLACE</span>(first_name, <span class="keyword">SUBSTR</span>(first_name, <span class="number">3</span>,<span class="number">2</span>), <span class="string">'--'</span>) <span class="string">"REPLACE"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--REPLACE() 퀴즈2</span></span><br><span class="line"><span class="comment">--phone_number 뒤 4자리를 -/-/로 출력되게 하기.</span></span><br><span class="line"><span class="keyword">SELECT</span> phone_number, <span class="keyword">REPLACE</span>(phone_number, <span class="keyword">SUBSTR</span>(phone_number, <span class="number">9</span>,<span class="number">4</span>), <span class="string">'-/-/'</span>) <span class="string">"REPLACE"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id &lt; <span class="number">145</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--REPLACE() 퀴즈3</span></span><br><span class="line"><span class="comment">--phone_number의 국번 부분만 ***처리해서 출력하기(모든 국번을 3자리로 간주)</span></span><br><span class="line"><span class="keyword">SELECT</span> phone_number, <span class="keyword">REPLACE</span>(phone_number, <span class="keyword">SUBSTR</span>(phone_number, <span class="number">5</span>,<span class="number">3</span>), <span class="string">'***'</span>) <span class="string">"REPLACE"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id &lt; <span class="number">145</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>숫자 관련 함수들<br>2-1. ROUND() 함수</p>
<ul>
<li>주어진 숫자를 반올림한 후 출력한다.</li>
<li>ROUND(숫자, 출력을 원하는 자리수)</li>
<li>숫자 관련 함수는 자릴수 하나의 차이가 어마어마한 차이를 낼 수 있기 때문에 특히 주의해야 한다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ROUND</span>(<span class="number">987.765</span>, <span class="number">2</span>) <span class="string">"ROUND1"</span></span><br><span class="line">, <span class="keyword">ROUND</span>(<span class="number">987.654</span>, <span class="number">0</span>) <span class="string">"ROUND2"</span></span><br><span class="line">, <span class="keyword">ROUND</span>(<span class="number">987.654</span>, <span class="number">-1</span>) <span class="string">"ROUND3"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>2-2. TRUNC() 함수</p>
<ul>
<li>주어진 숫자를 버림한 후 출력한다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TRUNC(<span class="number">987.765</span>, <span class="number">2</span>) <span class="string">"TRUNC1"</span></span><br><span class="line">, TRUNC(<span class="number">987.654</span>, <span class="number">0</span>) <span class="string">"TRUNC2"</span></span><br><span class="line">, TRUNC(<span class="number">987.654</span>, <span class="number">-1</span>) <span class="string">"TRUNC3"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>2-3. MOD() / CEIL() / FLOOR()</p>
<ul>
<li>MOD() 주어진 숫자를 나눈후 나머지 값을 출력함</li>
<li>CEIL() 주어진 숫자와 가장 근접한 큰 정수를 출력함  (여려거자 테이터를 하나의 기준으로 묶을 때 주로 사용한다.)</li>
<li>FlOOR()주어진 숫자와 가장 근접한 작은 정수를 출력함<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MOD</span>(<span class="number">121</span>, <span class="number">10</span>) <span class="string">"MOD"</span></span><br><span class="line">, <span class="keyword">CEIL</span>(<span class="number">123.45</span>) <span class="string">"CEIL"</span></span><br><span class="line">, <span class="keyword">FLOOR</span>(<span class="number">123.45</span>) <span class="string">"FLOOR"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">rownum</span> <span class="string">"ROWNUM"</span>, <span class="keyword">CEIL</span>(<span class="keyword">rownum</span>/<span class="number">3</span>) <span class="string">"TEAMNO"</span>, first_name</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--거래 명세서 출력할때나 대량의 데이터를 일정 개수씩 끊어서 출력해야할 경우에 아주 요긴하게 많이 사용되는 함수이다.</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>2-4. POWER() 함수</p>
<ul>
<li>숫자 1과 숫자2의 승수를 구해주는 함수이다</li>
<li>POWER(숫자1, 숫자2)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">POWER</span>(<span class="number">2</span>,<span class="number">3</span>)  <span class="comment">--2의 3승을 구해줌 결과는 8</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">POWER</span>(<span class="number">2</span>,<span class="number">10</span>)  <span class="comment">--2의 10승을 구해줌 결과는 1024</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--숫자 함수는 함수 문법이 어렵진 않지만 돈과 관련된 경우가 많기 때문에 정말 조심해야 한다.</span></span><br><span class="line"><span class="comment">--소수점 하나 잘못 설정하기만 해도 총 금액이 아주 크게 차이나는 경우가 많기 떄문에 꼭 주의해야 한다.</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>날짜 관련 함수들</p>
<ul>
<li>일반적으로<ul>
<li>7월 20일 +3일은 7월 23일롤 생각한다. (날짜 + 숫자 = 날짜)</li>
<li>7월 20일 -3일은 7월 17일로 생각한다. (날짜 - 숫자 = 날짜)</li>
<li>7월 20일 - 7월 15일은 5일 차이가 난다고 생각한다. (날짜 - 날짜 = 숫자)</li>
<li>윈도우용과 리눅스용은 날짜 표기 방법이 다르기 떄문에 요일 쓸 때 주의해야 한다. </li>
</ul>
</li>
</ul>
<p>3-1. SYSDATE 함수</p>
<ul>
<li>현재 시스템의 시간을 출력해주는 함수이다.</li>
<li>오라클은 OS로부터 시간을 가지고 온다.</li>
<li>그래서 오라클 DB가 설치된 서버는 절대로 OS에서 시간을 함부러 바꾸면 안된다!!!!!!!!!!!<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>3-2. MONTHS_BETWEEN 함수</p>
<ul>
<li>두 날짜를 입력받아 두 날짜 사이의 개월수를 출력하는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, hire_date, MONTHS_BETWEEN(hire_date, <span class="string">'18/01/10'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--MONTHS_BETWEEN() 함수 주의 사항!!!</span></span><br><span class="line"><span class="comment">--(1) 두 날짜중 큰수를 먼저 써야 양수가 나온다. 작은 날짜를 먼저쓰면 음수가 나온다.</span></span><br><span class="line"><span class="keyword">SELECT</span> first_name, hire_date, MONTHS_BETWEEN(<span class="string">'18/01/10'</span>, hire_date)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--(2) 두 날짜가 같은 달에 속해 있으면 특정 규칙으로 계산된 값이 나온다.</span></span><br><span class="line"><span class="keyword">SELECT</span> MONTHS_BETWEEN(<span class="string">'12/02/29'</span>, <span class="string">'12/02/01'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="comment">--0.90322...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> MONTHS_BETWEEN(<span class="string">'14/05/31'</span>, <span class="string">'14/05/01'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="comment">--0.96774193</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> MONTHS_BETWEEN(<span class="string">'13/02/28'</span>, <span class="string">'12/02/01'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="comment">--12.870967...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--모두 동일하게 1개월이지만 출력되는 값은 모두 다름을 알 수 있다.</span></span><br><span class="line"><span class="comment">--2월이 28일까지 있는 달과 29일(윤일)까지 있는 달은 구분하지 못한다. 문제의 소지가 있다.</span></span><br><span class="line"><span class="comment">--윤달이 있어서 29일까지이다.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> MONTHS_BETWEEN(<span class="string">'12/03/01'</span>, <span class="string">'12/02/28'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="comment">--0.1290322...</span></span><br><span class="line"><span class="comment">--윤달이 아니라서 28일까지이다.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> MONTHS_BETWEEN(<span class="string">'14/03/01'</span>, <span class="string">'14/02/28'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="comment">--0-1290322...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--일반적으로 MONTHS_BETWEEN 함수를 안쓰고 그냥 개월 수나 일수를 계산하는 떄는 1개월을 약 31일로 계산하기도 한다.</span></span><br><span class="line"><span class="comment">--MONTHS_BETWEEN 함수도 1개월을 평균 31일로 계싼한다고 알려져 있다.</span></span><br><span class="line"><span class="comment">--그러나 MONTHS 함수를 쓴 것과 그냥 31일로 계산한 결과는 차이가 난다.</span></span><br><span class="line"><span class="comment">--즉, 날짜를 계산 할 때 어떤 방법을 쓰느냐에 따라 결과가 상당히 다를 수 있기 때문에 주의해서 사용해야 한다.</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>3-3. ADD_MONTHS() 함수</p>
<ul>
<li>주어진 날짜에 숫자만큼의 달을 추가하는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, ADD_MONTHS(<span class="keyword">SYSDATE</span>, <span class="number">5</span>) <span class="string">"AFTER 5MONTHS"</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>3-4. NEXT_DAY() 함수</p>
<ul>
<li>주어진 날짜를 기준으로 돌아오는 가장 최근 요일의 날짜를 반환해주는 함수<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, NEXT_DAY(<span class="keyword">SYSDATE</span>, <span class="string">'월'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--특정 날짜를 기준으로 돌아오는 요일의 날짜를 찾고 싶다면 아래와 같이 하면 된다.</span></span><br><span class="line"><span class="keyword">SELECT</span> NEXT_DAY(<span class="string">'18/05/31'</span>, <span class="string">'월'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>3-5. LAST_DAY() 함수</p>
<ul>
<li>주어진 날짜가 속한 달의 가장 마지막 달을 출력해주는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, <span class="keyword">LAST_DAY</span>(<span class="keyword">SYSDATE</span>), <span class="keyword">LAST_DAY</span>(<span class="string">'14/05/01'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--ADD_MONTHS, NEXT_DAY, LAST_DAY와 같은 함수들은 보통 이번 달 까지는 할인 30% 적용한 가격으로 처한다 와 같이 이벤트 같은 것을 진행할 때 많이 사용한다.</span></span><br><span class="line"><span class="comment">--매달 마지막 달이 다를 수 있기에 할인 종료 시간에 날짜를 직접 입력하면 SQL을 일일이 변경해야 하는 번거로움이 있기때문에 LAST_DAY 함수를 사용한다.</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>3-6. 날짜의 ROUND(), TRUNC() 함수</p>
<ul>
<li>날짜의 ROUND() 함수는 하루의 반에 해당되는 시간은 낮(정오) 12:00:00인데 주어진 날짜가 이시간을 넘어설 경우 다음 날짜로 출력하고 이 시간이 안될 경우에는 당일로 출력한다.</li>
<li>반면 TRUNC() 함수는 무조건 당일로 출력한다.</li>
<li>이 함수들은 주로 원서 접수나, 상품 주문 등에서 오전까지 접수된 건은 당일 접수 처리하고 오후에 접수된 것은 이튿날로 처리할 때 접수 날짜를 ROUND 함수로 처리하면 되고 접수 시간에 상관없이 당일로 처리하는 경우는 TRUNC 함수로 처리할 때 사용될 수 있다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, <span class="keyword">ROUND</span>(<span class="keyword">SYSDATE</span>), TRUNC(<span class="keyword">SYSDATE</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>형변환 함수</p>
<ul>
<li>오라클에서 주로 사용되는 데이터 타입<ul>
<li>CHAR(n) 고정 길이의 문자를 저장한다. 최대값은 2000바이트.</li>
<li>VARCHAR(n) 변하는 길이의 문자를 저장한다. 최대값은 4000바이트.</li>
<li>NUMBER(p,s) 숫자 값을 저장한다. P는 전체 자리수로 1<del>38까지 가능하고, S는 소수점 이하 자리수로 -84</del>127까지 가능하다.</li>
<li>DATE 총 7바이트로 BC 4712년 1월 1일 부터 AD 9999년 12월 31일까지 날짜를 저장할 수 있다.</li>
<li>LONG 가변 길이의 문자를 저장하면 최대 2GB까지 저장할 수 있다.</li>
<li>CLOB 가변 길이의 문자를 저장하며 최대 4GB까지 저장할 수 있다.</li>
<li>BLOB 가변 길이의 바이너리 데이터를 최대 4GB까지 저장할 수 있다.</li>
<li>RAW(n) 원시 이진 데이터로 최대 2000바이트까지 저장할 수 있다.</li>
<li>LONG RAW(n) 원시 이진 데이터로 최대 2GB까지 저장할 수 있다.</li>
<li>BFILE 외부파일에 저장된 데이터로 최대 4GB까지 저장할 수 있다.</li>
</ul>
</li>
<li>묵시적(자동) 형변환과 명시적(수동) 형변환<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--묵시적(자동) 형변환 경우</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">2</span> + <span class="string">'2'</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">2</span> + TO_NUMBER(<span class="string">'2'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--언뜻 편해보이지만 튜닝에서 뜻하지 않게 속도가 느려지는 주범이 될 수 있으므로 조심해야 한다.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--명시적(수동) 형변환</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">               TO_CHAR()                    TO_CHAR()</span></span><br><span class="line"><span class="comment">             ------------→               ←------------ </span></span><br><span class="line"><span class="comment"> 숫자(number)                 문자(char)                   날짜(date)</span></span><br><span class="line"><span class="comment">             ←------------               -------------→</span></span><br><span class="line"><span class="comment">               TO_NUMBER()                  TO_DATE()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
4-1. TO_CHAR 함수(날짜형 →문자형로 형변환 하기)</li>
<li>TO_CHAR(원래날짜, ‘원하는 모양’)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--연도</span></span><br><span class="line"><span class="comment">-- YYYY/ RRRR(2000년 이후에 Y2K 버그로 등장한 날짜 표기법으로 연도 4자리표기법이다) / YY(끝에 두자리) / RR (끝에 두자리) / YEAR (연도의 영문 이름)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'YYYY'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'RRRR'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'YY'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'RR'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'YEAR'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 월</span></span><br><span class="line"><span class="comment">-- MM(두자리수로) / MON(윈도우에서는 월을 뜻하는 이름 전체, 유닉스에서는 영어 3글자로 표시), MONTH (월을 뜻하는 이름 전체를 표시한다)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'MM'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'MON'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'MONTH'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--일</span></span><br><span class="line"><span class="comment">--DD / DAY(요일에 해당하는 명칭을 표시, 윈도우에서는 한글로 나오고, 유닉스에서는 영어로 나온다.) / DDTH(몇번째 날인지 표시함)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'DD'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'DAY'</span>)</span><br><span class="line">, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'DDTH'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--시간</span></span><br><span class="line"><span class="comment">--HH24 (하루를 24시간으로 표시) / HH(하루를 12시간으로) / MI(분) / 초(SS)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">'RRRR-MM-DD:HH24:MI:SS'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--형변환 함수 퀴즈(1) 날짜 변환하기</span></span><br><span class="line"><span class="comment">--hire_date를 'YY-MM-DD'로 출력하기, 바꿀게 없었음</span></span><br><span class="line"><span class="keyword">SELECT</span> hire_date</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--형변환 함수 퀴즈(2) 날짜 변환하기2 // 입사일이 1,2,3,월인 사람들의 사번과 이름, 입사일을 출력하기</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, hire_date</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> TO_CHAR(hire_date, <span class="string">'MM'</span>) &lt;= <span class="string">'03'</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>4-2. TO_CHAR 함수 (숫자형→문자형 변환하기)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR(<span class="number">1234</span>, <span class="string">'99999'</span>)    <span class="comment">--9의 개수만큼 자릿수</span></span><br><span class="line">, TO_CHAR(<span class="number">1234</span>, <span class="string">'099999'</span>)        <span class="comment">--빈자리를 0으로 채움</span></span><br><span class="line">, TO_CHAR(<span class="number">1234</span>, <span class="string">'9999'</span>)         <span class="comment">--를 붙여서 표시</span></span><br><span class="line">, TO_CHAR(<span class="number">1234</span>,<span class="string">'9999.99'</span>)        <span class="comment">--소수점 이하를 표시</span></span><br><span class="line">, TO_CHAR(<span class="number">12345</span>, <span class="string">'99,999'</span>)      <span class="comment">--천단위의 구분 기호를 표시</span></span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"><span class="comment">--salary를 salary + (salary * commission_pct )으로 계산하고 천 단위 기호로 표시하기</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, salary, commission_pct</span><br><span class="line">, TO_CHAR(salary + salary * commission_pct, <span class="string">'999,999'</span>) <span class="string">"Salary"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, hire_date, salary</span><br><span class="line">,TO_CHAR(salary * <span class="number">1.15</span>, <span class="string">'$9999999'</span>) <span class="string">"15% UP"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

<p>4-3. TO_NUMBER() 함수</p>
<ul>
<li>숫자 아닌 숫자처럼 생긴 문자를 숫자로 바꾸어 주는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_NUMBER(<span class="string">'5'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>4-4. TO_DATE() 함수</p>
<ul>
<li>날짜가 아닌 날짜처럼 생긴 문자를 날짜로 바꿔주는 함수이다<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TO_DATE</span>(<span class="string">'18/01/10'</span>)</span><br><span class="line"><span class="keyword">FROM</span> dual;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>일반 함수</p>
<ul>
<li>일반 함수는 함수의 입력 값이 숫자, 문자, 날짜 구분 없이 다 사용할 수 있는 함수이다.</li>
</ul>
<p>5-1. NVL() 함수</p>
<ul>
<li>NULL 값을 만나면 다른값으로 치환해서 출력하는 함수</li>
<li>NVL(컬럼, 치환할 값)</li>
<li>NVL 함수는 NULL 값을 0을 포함한 다른 값으로 바꾸어주는 함수이다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--치환 값이 숫자일 경우</span></span><br><span class="line"><span class="keyword">SELECT</span> NVL(commission_pct, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--치환 값이 문자일 경우</span></span><br><span class="line"><span class="keyword">SELECT</span> NVL(first_name, <span class="string">'everyonehavename'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--치환 값이 날짜일 경우</span></span><br><span class="line"><span class="keyword">SELECT</span> NVL(hire_date, <span class="string">'18/01/10'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--NVL 함수 퀴즈</span></span><br><span class="line"><span class="comment">--commission_pct가 없는 교수는 0으로 계산하고 salay + (salary * commission) 구하기</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, salary, salary + salary * NVL(commission_pct, <span class="number">0</span>) <span class="string">"SALARY"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>5-2. NVL2() 함수</p>
<ul>
<li>NVL2 함수 </li>
<li>NVL 함수의 확장으로 NULL 값이 아닌 경우 출력할 값을 지정할 수 있다.</li>
<li>NVL2(COL1, COL2, COL3)  : COL1의 값이 NULL이 아니면 COL2를 NULL 이면 COL3를 출력한다<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--삼항 연산자 같은 건가...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, salary, commission_pct</span><br><span class="line">, NVL2(commission_pct, salary + salary * commission_pct, salary) <span class="string">"TOTAl"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--NVL2 함수 퀴즈</span></span><br><span class="line"><span class="comment">--commission_pct가 NULL일 경우 NULL 출력하기</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, commission_pct, NVL2(commission_pct, <span class="string">'EXIST'</span>, <span class="string">'NULL'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>5-3. DECODE() 함수</p>
<ul>
<li>DECODE 함수는 일반 개발 언어등에서 사용중인 분기문인 IF문을 오라클 SQL안으로 가져온 함수이다.</li>
<li>DECOD 함수는 오라클에서만 사용되는 함수로 IF문을 사용해야 하는 조건문을 처리할 수 있다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--유형(1) A가 B라면 1을 출력한다, A가 1이 아니라면 null을 출력한다.</span></span><br><span class="line"><span class="comment">--DECODE(A, B, '1', null) (마지막 null은 생략 가능하다.)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, manager_id, <span class="keyword">DECODE</span>(manager_id, <span class="number">114</span>, <span class="string">'SENIOR'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--유형(2) A가 B일 경우 1을 출력하고 아닐 경우 2를 출력</span></span><br><span class="line"><span class="comment">--DECODE(A, B, '1', '2') (마지막 null은 생략 가능하다.)</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, manager_id, <span class="keyword">DECODE</span>(manager_id, <span class="number">114</span>, <span class="string">'SENIOR'</span>, <span class="string">'ETC'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--유형(3) A가 B일 경우 1을 출력, C일 경우 '2', 둘 다 아닐 경우 3을 출력</span></span><br><span class="line"><span class="comment">--DECODE(A, B, '1', C, '2', '3')</span></span><br><span class="line"><span class="comment">--유형 3의 경우, 조건이 확장되는 경우 DECODE 문장에 조건과 결과가 추가되어야 확장 될 수 있다.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, first_name, manager_id, <span class="keyword">DECODE</span>(manager_id, <span class="number">114</span>, <span class="string">'SENIOR'</span>, <span class="number">100</span>, <span class="string">'JUNIOR'</span>, <span class="string">'ETC'</span>)</span><br><span class="line"><span class="keyword">FROM</span> hr.employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--유형(4) A가 B일 경우 중에서 C가 D를 만족하면 '1'을 출력하고 C가 D가 아닐 경우 null을 출력하는 경우</span></span><br><span class="line"><span class="comment">--DECODE(A, B, DECODE(C, D, '1', null))</span></span><br><span class="line"><span class="comment">--DECODE 함수 안에 DECODE 함수가 중첩 되는 경우</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> job_id, manager_id, <span class="keyword">DECODE</span>(job_id, <span class="string">'IT_PROG'</span>, <span class="keyword">DECODE</span>(manager_id, <span class="number">103</span>, <span class="string">'WHAT'</span>)) <span class="string">"ETC"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--유형(5) A가 B일 경우중에서 C가 D를 만족하면 '1'을 출력하고 C가 D가 아닐 경우 2를 출력하는 경우</span></span><br><span class="line"><span class="comment">--DECODE(A, B, DECODE(C, D, '1', '2'))</span></span><br><span class="line"><span class="comment">--적절한 예는 아니였음@@</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> NVL(<span class="keyword">DECODE</span>(first_name, <span class="string">'Steven'</span>, <span class="keyword">DECODE</span>(job_id, <span class="string">'AD_PRES'</span>, <span class="string">'FOUND!!'</span>, <span class="string">'FAILED'</span>)), <span class="string">'ugh'</span>) <span class="string">"RESULT"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--유형(6) A가 B일 경우중에서 C가 D를 만족하면 '1'을 출력하고 C가 D가 아닐 경우 '2' 를 출력하고 A가 B가 아닐 경우 '3'을 출력하는 경우</span></span><br><span class="line"><span class="comment">--DECODE(A, B, DECODE(C, D, '1', '2'), '3'</span></span><br><span class="line"><span class="comment">--적당한 예제를 만들기 힘드므로 일단은 패스</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>5-4.  CASE문</p>
<ul>
<li>DECODE 함수는 주로 = 인 값을 처리하는데 사용된다.</li>
<li>즉, 크거나 작은 조건을 처리할 경우 DECODE 함수는 불편한 부분이 많은데 이런 부분을 CASE문에서는 쉽게 처리가 가능하다.</li>
<li>CASE 조건 WHEN 결과1 THEN 출력1 [WHEN 결과2 THEN 출력2] else 출력3 END “컬럼명”</li>
<li>DECODE문과 비교 했을 때 문법이 많이 복잡하다. 그래서 대부분 = 조건문을 사용할 때는 CASE보다 DECODE 문장을 훨씬 더 많이 사용한다.<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--DECODE와 동일하게 = 조건으로 사용되는 경우</span></span><br><span class="line"><span class="keyword">SELECT</span> phone_number, <span class="keyword">CASE</span>(<span class="keyword">SUBSTR</span>(phone_number, <span class="number">1</span>, <span class="keyword">INSTR</span>(phone_number, <span class="string">'.'</span>)<span class="number">-1</span>)) <span class="keyword">WHEN</span> <span class="string">'515'</span> <span class="keyword">THEN</span> <span class="string">'서울'</span> <span class="keyword">ELSE</span> <span class="string">'ETC'</span> <span class="keyword">END</span> phone_number</span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--비교조건이 = 이 아닌  경우</span></span><br><span class="line"><span class="keyword">SELECT</span> hire_date, <span class="keyword">CASE</span> <span class="keyword">WHEN</span> TO_CHAR(hire_date, <span class="string">'MM'</span>) <span class="keyword">BETWEEN</span> <span class="string">'01'</span> <span class="keyword">AND</span> <span class="string">'03'</span> <span class="keyword">THEN</span> <span class="string">'1/4'</span></span><br><span class="line">                       <span class="keyword">WHEN</span> TO_CHAR(hire_date, <span class="string">'MM'</span>) <span class="keyword">BETWEEN</span> <span class="string">'04'</span> <span class="keyword">AND</span> <span class="string">'06'</span> <span class="keyword">THEN</span> <span class="string">'2/4'</span></span><br><span class="line">                       <span class="keyword">WHEN</span> TO_CHAR(hire_date, <span class="string">'MM'</span>) <span class="keyword">BETWEEN</span> <span class="string">'07'</span> <span class="keyword">AND</span> <span class="string">'09'</span> <span class="keyword">THEN</span> <span class="string">'3/4'</span></span><br><span class="line">                       <span class="keyword">WHEN</span> TO_CHAR(hire_date, <span class="string">'MM'</span>) <span class="keyword">BETWEEN</span> <span class="string">'10'</span> <span class="keyword">AND</span> <span class="string">'12'</span> <span class="keyword">THEN</span> <span class="string">'4/4'</span> <span class="keyword">END</span> <span class="string">"hire_date"</span></span><br><span class="line"><span class="keyword">FROM</span> hr.employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">--CASE문은 SQL 튜닝에 아주 요긴함게 많이 사용되고 있으면 DECODE 문과 비슷하지만 </span></span><br><span class="line"><span class="comment">--더 넓은 범위에서 사용할 수 있는 문법이므로 꼭 기억하고 연습해서 자신의 것으로 만들기!</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><del>정규식(Regular Expression) 함수</del></p>
</li>
</ol>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2018/01/10/2018-01-10-W.I.L/">prev</a><a class="next" href="/2018/01/09/2018-01-09-HavardCS50/">next</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'youmekko';
var disqus_identifier = '2018/01/10/2018-01-10-OracleSQL/';
var disqus_title = 'OracleSQL(3) 단일행 함수';
var disqus_url = 'http://yoursite.com/2018/01/10/2018-01-10-OracleSQL/';
(function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>&copy; 2016 - 2020 <a href="https://www.example.org/john-doe" target="_blank" rel="noopener">John Doe</a>.<br>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/Dreyer/hexo-theme-artemis" target="_blank">Artemis</a>.</p></div></footer></div></body></html>